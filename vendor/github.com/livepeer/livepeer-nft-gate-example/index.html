<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Livepeer NFT Gate Example</title>
    <style>
      html {
        font-family: sans-serif;
      }
      html,
      body,
      main {
        height: 100%;
      }
      main {
        flex-direction: column;
        align-items: stretch;
        justify-content: stretch;
        max-width: 800px;
        margin: auto;
      }
      main > div {
        padding: 1em;
        display: flex;
      }
      input {
        flex-grow: 1;
      }
      input[type="radio"] {
        display: inline;
      }
      textarea {
        width: 100%;
        height: 3em;
      }
	.button {
	  background-color: #FC444B;
	  border: none;
	  color: black;
  	  border-radius: 8px;
	  padding: 15px 32px;
	  text-align: center;
	  text-decoration: none;
	  display: inline-block;
	  font-size: 16px;
	  margin: 4px 2px;
	  cursor: pointer;
	}
    </style>
  </head>
  <body>

    <main id="main" style="display: none;"></main>
    <back id="back" style="display: none;">
    </back>

    <verify id="verify" style="display: none;">
	<h3>To upload videos you must have a Lens profile.  Please proceed to verify (currently the only supported wallet for this action is MetaMask).</h3>
	<center>
	<!--button class="button" style="color: black;" onclick="video=document.getElementById('box'); if (document.pictureInPictureEnabled) video.play(); 
		video.webkitSetPresentationMode(video.webkitPresentationMode === 'picture-in-picture' ? 'inline' : 'picture-in-picture');
		video.requestPictureInPicture(); 
		newsearch=window.location.search.replace('mode=verify&','');
		function sleep(milliseconds) {
		  const date = Date.now();
		  let currentDate = null;
		  do {
		    currentDate = Date.now();
		  } while (currentDate - date < milliseconds);
		};
		sleep(1000);
		window.location.href='https://metamask.app.link/dapp/www.430.studio'+newsearch;
		//setTimeout(function () { window.location.href='https://metamask.app.link/dapp/www.430.studio'+newsearch },1000);
		">Verify on MetaMask
	</button-->
	<button class="button" style="color: black;" onclick="
		newsearch=window.location.search.replace('mode=verify&','');
		window.location.href='https://metamask.app.link/dapp/www.430.studio'+newsearch;">
	  Verify on MetaMask
	</button>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
        <!--video style="height: 150px; width: 300px" id="box" controls loop muted playsinline>
          <source src="https://your.cmptr.cloud:2017/no-audio.mp4">
	</video-->
	</center>
    </verify>
    <script>
	//alert(window.location.search);

	function check() {
          var a = document.getElementsByTagName('h3');

          for (var idx= 0; idx < a.length; ++idx){
            console.log(a[idx].innerText);
	    //alert(a[idx].innerText);
	    if (a[idx].innerText.startsWith("Success")) {
	      document.getElementById("back").style.display="block";
	      //alert("Lens Profile has been verified");
	    }
	  }
	}

	if (window.location.search.startsWith("?mode=verify")) {
	  document.getElementById("verify").style.display="block";
	  //alert("new query: " + window.location.search.replace('mode=verify&',''));
	}
	else {
	    document.getElementById("main").style.display="block";
	    setInterval(check,3000,);
	}
	
    </script>
    <script src="data-url:client.tsx" type="module"></script>
  </body>
</html>
